<!-- Login EJS template -->

<html>
<head>
    <%- include('partials/head.ejs',
    {
    pageTitle: 'Login',
    pageDescription: 'Login to access your servers'
    }) %>
</head>
<body class="bg-gray-100 text-gray-900">
<div class="min-h-screen flex justify-center bg-gray-50 py-6 px-4 sm:px-6 lg:px-8">
    <div class="w-full">
        <!-- Full-width card for header -->
        <div class="m-8 p-4 bg-white rounded-lg shadow-lg">
            <div class="text-center">
                <h2 class="mt-6 text-center text-3xl leading-9 font-extrabold text-gray-900">
                    <%- server.name %>
                </h2>
                <p class="mt-2 text-center text-sm leading-5 text-gray-600">
                    Server ID: <%- server.id %>
                </p>
            </div>
        </div>

        <!-- Server status card -->
        <div class="m-8 p-4 bg-white rounded-lg shadow-lg">
            <div class="text-center">
                <h2 class="mt-6 text-center text-3xl leading-9 font-extrabold text-gray-900">
                    Server Status
                </h2>
                <p class="mt-2 text-center text-sm leading-5 text-gray-600">
                    <% if (status.online) { %> Online
                    <% } else { %> Offline
                    <% } %>
                </p>
                <!-- Create a code block with a dark gray background to hold the MOTD -->
                <div class="bg-gray-800 rounded-lg p-4 mt-4 text-left text-gray-100" style="font-family: monospace;">
                    <% status.motd.html.forEach(function(line) { %>
                        <%- line %>
                    <% }) %>
                </div>
                <!-- Create a list of players with their player heads next to them -->
                <div class="mt-4">
                    <h3 class="text-lg leading-6 font-medium text-gray-900">
                        Players
                    </h3>
                    <ul class="mt-2">
                        <% if (status.players.online > 0) { %>
                            <% status.players.list.forEach(function(player) { %>
                                <li class="flex items-center">
                                    <span class="ml-2"><%- player.name %></span>
                                </li>
                            <% }) %>
                        <% } else { %>
                            <li class="flex items-center">
                                <span class="ml-2">No players online ðŸ˜”</span>
                            </li>
                        <% } %>
                    </ul>
                </div>
            </div>
        </div>

        <!-- RCON card -->
        <div class="m-8 p-4 bg-white rounded-lg shadow-lg">
            <div class="text-center">
                <h2 class="mt-6 text-center text-3xl leading-9 font-extrabold text-gray-900">
                    RCON
                </h2>
                <!-- Code block to display the RCON console -->
                <div class="bg-gray-800 rounded-lg p-4 mt-4 text-left text-gray-100" style="font-family: monospace;" id="rcon-console">

                </div>
                <p class="mt-2 text-center text-sm leading-5 text-gray-600">
                    Send commands to your server
                </p>
                <!-- Prevent sending a post request since we're handling with socket.io -->
                <form id="rcon" class="mt-4">
                    <input type="hidden" name="server" value="<%- server.id %>">
                    <input type="text" name="command" class="bg-gray-200 rounded-lg p-2" placeholder="Command">
                    <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                        Send
                    </button>
                </form>
            </div>
        </div>

        <!-- Server actions card -->
        <div class="m-8 p-4 bg-white rounded-lg shadow-lg">
            <div class="text-center">
                <h2 class="mt-6 text-center text-3xl leading-9 font-extrabold text-gray-900">
                    Server Actions
                </h2>
                <p class="mt-2 text-center text-sm leading-5 text-gray-600">
                    Start, stop, and restart your server
                </p>
                <form id="server-actions" class="mt-4">
                    <input type="hidden" name="server" value="<%- server.id %>">
                    <button type="submit" name="action" value="start" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">
                        Start
                    </button>
                    <button type="submit" name="action" value="stop" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">
                        Stop
                    </button>
                    <button type="submit" name="action" value="restart" class="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded">
                        Restart
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
<script src="/socket.io/socket.io.js"></script>
<script>
    // connect to socket
    var socket = io();


    io.on('connect', function() {
        // when the server sends a message
        socket.on('r
    });

    // when the form is submitted
    document.getElementById('rcon').addEventListener('submit', function(e) {
        // prevent the form from submitting
        e.preventDefault();
        // get the command
        var command = document.querySelector('input[name="command"]').value;
        // send the command to the server
        socket.emit('command', {
            command: command
        });
    });


</script>
</body>
</html>